<!--views/pages/admin/playground.ejs-->

<%- include("../../layout/base", {
  title: "API Playground",
  body: `
    <hgroup>
      <h1>API Playground</h1>
      <p>Guided API explorer for backend endpoints</p>
    </hgroup>

    <!-- =====================
         Auth Token
         ===================== -->
    <article>
      <h3>Authorization</h3>
      <label>
        Bearer Token (optional for GET)
        <input id="token" type="text" placeholder="Paste JWT here" />
      </label>
      <p class="muted">
        GET endpoints may work without auth. POST/PUT/DELETE require Supabase JWT.
      </p>
    </article>

    <!-- =====================
         Endpoint Catalog
         ===================== -->
    <article>
      <h3>Endpoints</h3>
      <ul id="endpoint-list"></ul>
    </article>

    <!-- =====================
         Request Builder
         ===================== -->
    <article>
      <h3>Request</h3>

      <div class="grid">
        <label>
          Method
          <input id="method" readonly />
        </label>

        <label>
          Endpoint
          <input id="endpoint" placeholder="/tasks/1" />
        </label>
      </div>

      <label>
        Body Type
        <select id="bodyType">
          <option value="none">None</option>
          <option value="json">JSON</option>
          <option value="form">Form (x-www-form-urlencoded)</option>
        </select>
      </label>

      <label>
        Request Body
        <textarea id="body" rows="8"></textarea>
      </label>

      <div class="grid">
        <button id="beautify">Beautify JSON</button>
        <button id="send">Send Request</button>
        <button class="outline" id="copyCurl">Copy as cURL</button>
      </div>
    </article>

    <!-- =====================
         Response
         ===================== -->
    <article>
      <h3>Response</h3>
      <ul>
        <li>Status: <strong id="status">—</strong></li>
        <li>Time: <strong id="time">—</strong> ms</li>
        <li>Rate Limit: <strong id="rate">—</strong></li>
      </ul>
      <pre><code id="response">{}</code></pre>
    </article>

    <script src="/js/playground.js"></script>
  `
}) %>

