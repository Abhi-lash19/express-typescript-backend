<!-- views/admin/docs.ejs -->

<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>API Docs</title>
  <link rel="stylesheet" href="https://unpkg.com/@picocss/pico@latest/css/pico.min.css">
</head>
<body class="container">

<h1>API Documentation</h1>

<section id="docs"></section>

<script>
fetch("/internal/meta/apis")
  .then(res => res.json())
  .then(data => {
    document.getElementById("docs").innerHTML =
      data.apis.map(api => `
        <article>
          <h3>${api.method} ${api.path}</h3>
          <p>${api.description}</p>
          <pre>${JSON.stringify(api.sampleRequest || {}, null, 2)}</pre>
        </article>
      `).join("");
  });
</script>

</body>
</html>
