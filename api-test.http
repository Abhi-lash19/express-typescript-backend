############################################
# Server: http://localhost:3000
# Purpose: Validate request validation behavior
############################################


############################################
# ✅ 1. LIST TASKS (NO QUERY)
# Expected: 200 OK
############################################
### List tasks
GET http://localhost:3000/tasks HTTP/1.1


############################################
# ❌ 2. SEARCH TASKS (INVALID QUERY)
# Reason: search must be a string without spaces
# Expected: 400 Bad Request
############################################
### Invalid search query (contains space)
GET http://localhost:3000/tasks?search=abc Title HTTP/1.1


############################################
# ❌ 3. GET TASK BY INVALID ID
# Reason: id must be a number
# Expected: 400 Bad Request
############################################
### Invalid task ID
GET http://localhost:3000/tasks/abc HTTP/1.1


############################################
# ✅ 4. CREATE TASK (VALID JSON BODY)
# Expected: 201 Created
############################################
### Create a new task (valid)
POST http://localhost:3000/tasks HTTP/1.1
Content-Type: application/json
x-api-key: mysecretkey

{
  "title": "Another task",
  "completed": false
}


############################################
# ❌ 5. CREATE TASK (INVALID BODY)
# Reason: title must be a string
# Expected: 400 Bad Request
############################################
### Create task with invalid title type
POST http://localhost:3000/tasks HTTP/1.1
Content-Type: application/json
x-api-key: mysecretkey

{
  "title": 123,
  "completed": false
}


############################################
# ⚠️ 6. CREATE TASK WITH FORM DATA
# Reason: completed=false is a string
# Behavior depends on schema:
# - ❌ FAIL if strict boolean
# - ✅ PASS if z.coerce.boolean() is used
############################################
### Create task with form data (depends on schema)
POST http://localhost:3000/tasks HTTP/1.1
Content-Type: application/x-www-form-urlencoded
x-api-key: mysecretkey

title=Another+task&completed=false


############################################
# ❌ 7. UPDATE TASK WITHOUT AUTH
# Expected: 401 Unauthorized
############################################
### Update task without API key
PUT http://localhost:3000/tasks/2 HTTP/1.1
Content-Type: application/json

{
  "title": "Updated task title",
  "completed": true
}


############################################
# ✅ 8. UPDATE TASK (VALID)
# Expected: 200 OK
############################################
### Update a task (valid)
PUT http://localhost:3000/tasks/2 HTTP/1.1
Content-Type: application/json
x-api-key: mysecretkey

{
  "title": "Updated task title",
  "completed": true
}
