############################################
# Server: http://localhost:3000
# Auth: Supabase JWT
############################################

@token = eyJhbGciOiJFUzI1NiIsImtpZCI6IjlmODFjNmE0LWNjYTMtNDM3Yy04ZjI3LWMxYWU2ZTBlMjAyMyIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJodHRwczovL3B3bnR6dGRjcmRtdG90cWdjdnVlLnN1cGFiYXNlLmNvL2F1dGgvdjEiLCJzdWIiOiIwMjllNzBmMC1mMjg1LTQyNzUtODA2Mi00NjU3YzU0YzFiZWIiLCJhdWQiOiJhdXRoZW50aWNhdGVkIiwiZXhwIjoxNzY3NDIzODM3LCJpYXQiOjE3Njc0MjAyMzcsImVtYWlsIjoiYWJoaWxhc2hrdW1hcmdpcmk2M0BnbWFpbC5jb20iLCJwaG9uZSI6IiIsImFwcF9tZXRhZGF0YSI6eyJwcm92aWRlciI6ImVtYWlsIiwicHJvdmlkZXJzIjpbImVtYWlsIl19LCJ1c2VyX21ldGFkYXRhIjp7ImVtYWlsX3ZlcmlmaWVkIjp0cnVlfSwicm9sZSI6ImF1dGhlbnRpY2F0ZWQiLCJhYWwiOiJhYWwxIiwiYW1yIjpbeyJtZXRob2QiOiJwYXNzd29yZCIsInRpbWVzdGFtcCI6MTc2NzQyMDIzN31dLCJzZXNzaW9uX2lkIjoiZWRlN2Q3ZDMtNzE0Ny00Yzg4LWE5NmYtZjk1Y2E5NGExZmY5IiwiaXNfYW5vbnltb3VzIjpmYWxzZX0.Sl8FRsXEo6vzoY_2y4PzXffMuFguenvWHZ-ul4-fbos9dIzHNwaSB29n206YErzow1V0c0TJhww-mDI29-YX3A


############################################
# 1. LIST TASKS (AUTHORIZED)
# Expected: 200 OK
############################################
### List tasks
GET http://localhost:3000/tasks
Authorization: Bearer {{token}}


############################################
# 2. SEARCH TASKS
# Expected: 200 OK (user-scoped)
############################################
### Search tasks
GET http://localhost:3000/tasks?search=1
Authorization: Bearer {{token}}


############################################
# 3. LIST TASKS WITH PAGINATION
# Expected: 200 OK
############################################
### Paginated tasks
GET http://localhost:3000/tasks?page=1&limit=5
Authorization: Bearer {{token}}


############################################
# 4. GET TASK BY ID (OWN TASK)
# Expected: 200 OK
############################################
### Get task by ID
GET http://localhost:3000/tasks/1
Authorization: Bearer {{token}}


############################################
# 5. GET TASK BY ID (NOT OWNED)
# Expected: 404 Not Found
############################################
### Cross-user access attempt
GET http://localhost:3000/tasks/9999
Authorization: Bearer {{token}}


############################################
# 6. CREATE TASK
# Expected: 201 Created
############################################
### Create task
POST http://localhost:3000/tasks
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "title": "My Supabase Task new",
  "completed": false
}


############################################
# 7. UPDATE TASK
# Expected: 200 OK
############################################
### Update task
PUT http://localhost:3000/tasks/14
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "title": "Updated title",
  "completed": true
}


############################################
# 8. DELETE TASK
# Expected: 200 OK
############################################
### Delete task
DELETE http://localhost:3000/tasks/14
Authorization: Bearer {{token}}


############################################
# 9. UNAUTHORIZED ACCESS
# Expected: 401 Unauthorized
############################################
### Missing token
GET http://localhost:3000/tasks


############################################
# 10. API V1 ROUTES (SAME AUTH BEHAVIOR)
############################################
### List tasks via API v1
GET http://localhost:3000/api/v1/tasks
Authorization: Bearer {{token}}
