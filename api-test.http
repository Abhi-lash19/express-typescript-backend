############################################
# Server: http://localhost:3000
# Purpose: Validate Supabase-backed API
############################################


############################################
# 1. LIST TASKS
# Expected: 200 OK
# Response: success=true, data.tasks[]
############################################
### List tasks
GET http://localhost:3000/tasks HTTP/1.1


############################################
# 2. SEARCH TASKS
# Expected: 200 OK
# Response: filtered tasks
############################################
### Search tasks
GET http://localhost:3000/tasks?search=Supabase HTTP/1.1


############################################
# 3. GET TASK BY INVALID ID FORMAT
# Expected: 400 Bad Request
############################################
### Invalid task ID format
GET http://localhost:3000/tasks/8 HTTP/1.1


############################################
# 4. GET TASK BY NON-EXISTENT ID
# Expected: 404 Not Found
############################################
### Task not found
GET http://localhost:3000/tasks/9999 HTTP/1.1


############################################
# 5. CREATE TASK (VALID)
# Expected: 201 Created
############################################
### Create task
POST http://localhost:3000/tasks HTTP/1.1
Content-Type: application/json
x-api-key: mysecretkey

{
  "title": "Verify Supabase integration",
  "completed": false
}


############################################
# 6. CREATE TASK (INVALID BODY)
# Expected: 400 Bad Request
############################################
### Invalid task body
POST http://localhost:3000/tasks HTTP/1.1
Content-Type: application/json
x-api-key: mysecretkey

{
  "title": 123
}


############################################
# 7. UPDATE TASK WITHOUT AUTH
# Expected: 401 Unauthorized
############################################
### Update without API key
PUT http://localhost:3000/tasks/1 HTTP/1.1
Content-Type: application/json

{
  "title": "Should fail",
  "completed": true
}


############################################
# 8. UPDATE TASK (VALID)
# Expected: 200 OK
############################################
### Update task
PUT http://localhost:3000/tasks/1 HTTP/1.1
Content-Type: application/json
x-api-key: mysecretkey

{
  "title": "Updated from API",
  "completed": true
}


############################################
# 9. DELETE TASK (VALID)
# Expected: 200 OK
############################################
### Delete task
DELETE http://localhost:3000/tasks/1 HTTP/1.1
x-api-key: mysecretkey


############################################
# 10. RATE LIMIT TEST
# Expected: 429 Too Many Requests
############################################
### Rate limit test
GET http://localhost:3000/tasks HTTP/1.1


############################################
# 11. UNKNOWN ROUTE
# Expected: 404 Not Found
############################################
### Unknown route
GET http://localhost:3000/unknown-route HTTP/1.1


############################################
# 12. API VERSIONED ROUTES
############################################
### List tasks (v1)
GET http://localhost:3000/api/v1/tasks HTTP/1.1

### Create task (v1)
POST http://localhost:3000/api/v1/tasks HTTP/1.1
Content-Type: application/json
x-api-key: mysecretkey

{
  "title": "Task via API v1",
  "completed": false
}
